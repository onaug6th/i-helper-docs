(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{322:function(s,t,a){s.exports=a.p+"assets/img/1.bc931ddb.png"},323:function(s,t,a){s.exports=a.p+"assets/img/2.180799fa.png"},324:function(s,t,a){s.exports=a.p+"assets/img/2-1.37926435.png"},325:function(s,t,a){s.exports=a.p+"assets/img/3.ac9c8afb.png"},326:function(s,t,a){s.exports=a.p+"assets/img/3-1.91fb13ee.png"},327:function(s,t,a){s.exports=a.p+"assets/img/3-2.ca4e9116.png"},328:function(s,t,a){s.exports=a.p+"assets/img/4.c1e167fa.png"},329:function(s,t,a){s.exports=a.p+"assets/img/5.1c2dc0da.png"},415:function(s,t,a){"use strict";a.r(t);var n=a(29),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"编写新的插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编写新的插件"}},[s._v("#")]),s._v(" 编写新的插件")]),s._v(" "),n("p",[s._v("如果你掌握了web开发的技能，开发iHelper的插件非常简单！")]),s._v(" "),n("p",[s._v("通过配置简单的配置文件，只需像往常一样编写你的web项目，将配置文件拖拽到iHelper中。就能添加一个新的插件，插件的内容和功能完全由你来决定。")]),s._v(" "),n("p",[s._v("iHelper提供了丰富的API，方便插件进行数据的写入读取或与操作系统打交道。")]),s._v(" "),n("p",[s._v("这里可以下载一个插件的"),n("a",{attrs:{href:"https://ihelper-1253668581.cos.ap-nanjing.myqcloud.com/iHelper-plugin.rar",target:"_blank",rel:"noopener noreferrer"}},[s._v("demo"),n("OutboundLink")],1),s._v("，方便你快速开始。")]),s._v(" "),n("p",[s._v("让我们开始编写一个新的插件吧！")]),s._v(" "),n("h2",{attrs:{id:"编写插件的配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编写插件的配置"}},[s._v("#")]),s._v(" 编写插件的配置")]),s._v(" "),n("p",[s._v("在开发一个新插件前，我们需要编写一份配置文件 "),n("code",[s._v("plugin.json")]),s._v(" 用于描述插件的基本信息与行为，和开放某些权限控制。")]),s._v(" "),n("p",[s._v("我们编写一份简单的配置，只需要几个必要的配置就可以了。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"我的第一个插件"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"logo"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logo.png"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"desc"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"插件的描述"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/index.html"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("同时我们需要在目录中准备插件的入口文件，logo图片。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("|——dist\n|     |_index.html\n|\n|——logo.png\n|\n|-plugin.json\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("编写好配置文件后，将"),n("code",[s._v("plugin.json")]),s._v("拖拽到iHelper中。就会出现添加插件的面板。点击添加插件，即可新增插件。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(322),alt:""}})]),s._v(" "),n("p",[s._v("像"),n("code",[s._v("logo")]),s._v(" 和 "),n("code",[s._v("main")]),s._v(" 值为路径的配置，在寻找目标文件时。会基于"),n("code",[s._v("plugin.json")]),s._v("的当前文件夹路径进行寻找。所有的配置信息我们都能在 "),n("RouterLink",{attrs:{to:"/guide/advanced/plugin-config.html"}},[s._v("插件配置手册")]),s._v("中进行查看。")],1),s._v(" "),n("h2",{attrs:{id:"插件开发者模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件开发者模式"}},[s._v("#")]),s._v(" 插件开发者模式")]),s._v(" "),n("p",[s._v("在新增插件成功后，我们可以在"),n("strong",[s._v("开发者")]),s._v("面板中找到这个插件，并且点击"),n("strong",[s._v("启动")]),s._v("来运行他。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(323),alt:""}})]),s._v(" "),n("p",[s._v("此时会打开新的插件窗体，窗体的地址为"),n("code",[s._v("plugin.json")]),s._v("的"),n("code",[s._v("main")]),s._v("配置值。")]),s._v(" "),n("p",[s._v("在插件以开发者模式打开时，会一起启动插件窗体的开发者工具。也可以通过头部的"),n("strong",[s._v("切换开发者工具")]),s._v("按钮来进行开发者工具的显示隐藏。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(324),alt:""}})]),s._v(" "),n("p",[s._v("在开发时，我们可以设置指定开发时的配置，避免在插件开发/发布时频繁修改配置的入口文件信息。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dist/index.html"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:9528"')]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("这样插件在开发模式打开时，会优先读取"),n("code",[s._v("dev.main")]),s._v("的入口地址来打开插件地址。")]),s._v(" "),n("p",[s._v("同样的，如果你需要验证打包后插件文件功能。也可以设置"),n("code",[s._v("dev.main")]),s._v("值为"),n("code",[s._v("打包后的文件路径")]),s._v("。")]),s._v(" "),n("p",[s._v("需要注意的是，每次修改了插件配置后。需要点击"),n("strong",[s._v("重载插件")]),s._v("按钮来更新插件最新的配置信息")]),s._v(" "),n("h2",{attrs:{id:"调用插件api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调用插件api"}},[s._v("#")]),s._v(" 调用插件API")]),s._v(" "),n("p",[s._v("iHelper给插件提供了大量的api，方便插件与操作系统打交道、与其他插件进行通信、存取数据库。还有其他更多的方法属性。")]),s._v(" "),n("p",[s._v("iHelper往插件的全局对象（window）中，挂载了名为"),n("code",[s._v("iHelper")]),s._v("的api方法。你可以在页面中调用此方法。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  获取当前登录用户信息")]),s._v("\niHelper"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getUser")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//  插件数据库查询")]),s._v("\niHelper"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("所有的api都能在"),n("RouterLink",{attrs:{to:"/api/"}},[s._v("插件API手册")]),s._v("中进行查阅。")],1),s._v(" "),n("h2",{attrs:{id:"插件打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件打包"}},[s._v("#")]),s._v(" 插件打包")]),s._v(" "),n("p",[s._v("很高兴来到这一刻！你的得意作品已经完成了。正准备分享给其他人一起使用。")]),s._v(" "),n("p",[s._v("在插件功能完成后，你可以通过打包的形式将插件打包成压缩包。并且将此压缩包提供给其他人进行本地安装，来使用你的插件。")]),s._v(" "),n("p",[n("strong",[s._v("在打包前，最好先检查一下插件的配置文件，确认各项配置是否正确")])]),s._v(" "),n("p",[s._v("在"),n("strong",[s._v("开发者")]),s._v("面板中，点击"),n("strong",[s._v("打包")]),s._v("按钮。即可将此插件进行打包，打包完成后。会自动打开打包后的目录。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(325),alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:a(326),alt:""}})]),s._v(" "),n("p",[s._v("我们可以将插件压缩包拖拽到iHelper中，进行安装使用。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(327),alt:""}})]),s._v(" "),n("h2",{attrs:{id:"插件发布"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件发布"}},[s._v("#")]),s._v(" 插件发布")]),s._v(" "),n("p",[s._v("我们的插件可以给更多人一起使用，现在我们将插件发布到插件商店中！😀")]),s._v(" "),n("p",[s._v("在"),n("strong",[s._v("开发者")]),s._v("面板中，点击"),n("strong",[s._v("发布")]),s._v("按钮。即可将插件发布到插件商店中。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(328),alt:""}})]),s._v(" "),n("p",[s._v("因为发布插件需要与用户的账户进行绑定，如果发布前没有登录账号，需要用户注册并登录。")]),s._v(" "),n("p",[s._v("注册过程非常简单，不会收集任何信息。")]),s._v(" "),n("p",[s._v("插件发布需要配置版本号，并且版本号要大于上一个发布版本的版本号。最好也检查一下插件的配置文件，确认各项配置是否正确。")]),s._v(" "),n("p",[s._v("一切就绪，点击发布按钮。填写本次发布的描述内容并提交。"),n("s",[s._v("我们")]),s._v("我会迅速的处理插件的审核，审核通过后在商店就可以看到你的得意之作了( •̀ ω •́ )✧")]),s._v(" "),n("p",[n("img",{attrs:{src:a(329),alt:""}})])])}),[],!1,null,null,null);t.default=e.exports}}]);